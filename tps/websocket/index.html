<!-- index.html -->

<!DOCTYPE html>
<html>
<head>
  <title>Communication bidirectionnelle avec WebSocket</title>
</head>
<body>
  <h1>Communication bidirectionnelle avec WebSocket</h1>
  
  <label for="message">Message :</label>
  <input type="text" id="message" required><br>
  
  <button onclick="envoyerMessage()">Envoyer</button>
  
  <script>
    // Création d'une instance WebSocket et connexion au serveur WebSocket
    const socket = new WebSocket('ws://localhost:8080');
  
    // Événement déclenché lorsque la connexion au serveur WebSocket est établie
    socket.addEventListener('open', function (event) {
      console.log('Connexion établie');
    });
  
    // Événement déclenché lorsque le client reçoit un message du serveur
    socket.addEventListener('message', function (event) {
      console.log('Reçu du serveur :', event.data);
    });
  
    // Fonction pour envoyer un message au serveur
    function envoyerMessage() {
      // Récupération de la valeur du champ de saisie pour le message
      const message = document.getElementById('message').value;
      
      // Envoi du message au serveur
      socket.send(message);
    }
  </script>

  <!--
    Ce code HTML crée une interface utilisateur avec un champ de saisie pour le message et un bouton pour l'envoyer. 
    Lorsque le bouton est cliqué, la fonction envoyerMessage() est appelée.
    Au chargement de la page, une instance WebSocket est créée et une connexion est établie avec le serveur WebSocket à l'adresse ws://localhost:8080. 
    Lorsque la connexion est établie, l'événement open est déclenché et le message "Connexion établie" est affiché dans la console.
    Lorsque le client reçoit un message du serveur, l'événement message est déclenché et le message reçu est affiché dans la console.
    La fonction envoyerMessage() récupère la valeur du champ de saisie pour le message, puis envoie ce message au serveur via la connexion WebSocket établie.
    Ainsi, ce code permet une communication bidirectionnelle entre le client (navigateur) et le serveur via WebSocket.

    Assurez voir d'avoir installer ws avec : npm install ws
    Pour exécuter le code en utilisant la commande : node server.js
  -->
</body>
</html>
