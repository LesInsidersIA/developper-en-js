<!DOCTYPE html>
<html>
<head>
  <!-- Balise meta pour spécifier l'encodage des caractères -->
  <meta charset="UTF-8">
  
  <!-- Titre de la page affiché dans l'onglet du navigateur -->
  <title>Exemple de squelette HTML avec JavaScript</title>
  
  <!-- Autres balises meta, feuilles de style CSS, etc. -->
  <!-- ... -->
</head>
<body>

  <!-- Sans NODE JS -->
  <!-- Votre contenu HTML ici -->
  
  <!-- Balise script pour inclure du code JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>

  <script >
    // 1 - Installation de npm 
    // Commande : npm install lodash

    // 2 - Prompt pour les informations de l'étudiant
    let prenom = prompt("Entrez votre prénom:");  // Demande le prénom
    let nom = prompt("Entrez votre nom:");  // Demande le nom
    let notes = prompt("Entrez vos notes, séparées par des virgules (ex : 15,18,16):");  // Demande les notes
  

    // 3 - Création de l'objet etudiant et calcule de la moyenne
    // Convertir les notes en un tableau de nombres
    notes = notes.split(",").map(Number);  // Convertit les notes de chaîne à tableau de nombres
    // Créer l'objet étudiant
    let etudiant = {
      prenom: prenom,  // Stocke le prénom
      nom: nom,  // Stocke le nom
      notes: notes,  // Stocke les notes
      // Réduit le tableau de notes en une somme en utilisant la méthode reduce()
      // La fonction fléchée (a, b) => a + b est utilisée pour ajouter chaque élément du tableau
      // La valeur initiale 0 est passée en deuxième argument de reduce()
      moyenne: function() {  // Calcule la moyenne des notes
        let somme = this.notes.reduce((a, b) => a + b, 0);
        // Retourne la moyenne en divisant la somme par la longueur du tableau de notes
        return somme / this.notes.length;
      }
    };

    // Appel de la méthode moyenne() et affichage de la moyenne dans la console
    console.log("La moyenne de", etudiant.prenom, etudiant.nom, "est :", etudiant.moyenne());
    // Dans cet exemple, la moyenne de l'étudiant est calculée en appelant la méthode 

    // Afficher la note la plus élevée
    console.log("La note la plus élevée est : " + Math.max(...etudiant.notes));  // Trouve et affiche la note la plus élevée

    // 4 - Création de la fonction comparedNumbers
    function compareNumbers(a, b) {  // Compare deux nombres et renvoie le plus grand ou une égalité
      if (a > b) {
        return a;
      } else if (a < b) {
        return b;
      } else {
        return "Les nombres sont égaux";
      }
    }

    let note1 = etudiant.notes[0];
    let note2 = etudiant.notes[1];
    let note3 = etudiant.notes[3];
    
    // Test de la fonction compareNumbers
    console.log("Le résultat de la comparaison des deux premières notes est :", compareNumbers(note1, note2));


    // 5 - Fonction factorielle
    function factorielle(n) {  // Calcule la factorielle d'un nombre
      if (n === 0) {
        return 1;
      } else {
        return n * factorielle(n - 1);
      }
    }
    
    // Test en calculant la factorielle du nombre total de notes
    console.log("La factorielle du nombre total de notes est : " + factorielle(etudiant.notes.length));  
  
    // 6 - Fonction factorielle
    // Créer un Set avec les notes de l'étudiant et vérifier si la note 10 est présente
    let notesSet = new Set(etudiant.notes);  // Crée un Set avec les notes de l'étudiant
    console.log("La note 10 est présente : " + notesSet.has(10));  // Vérifie et affiche si la note 10 est présente
    // Afficher le type de l'objet Set
    // Check if the variable is a Set
    if (notesSet instanceof Set) {
      console.log("notesSet variable is a Set");
    } else {
      console.log("notesSet variable is not a Set");
    }
  
    // 7 - Création d'une Map associant le nom de l'étudiant à ses notes
    let etudiantsMap = new Map();  // Crée une Map
    etudiantsMap.set(etudiant.nom, etudiant.notes);  // Associe le nom de l'étudiant à ses notes
    console.log("Les notes de " + etudiant.nom + " sont : " + etudiantsMap.get(etudiant.nom));  // Récupère et affiche les notes de l'étudiant

    // 8 - Utilisation de Lodash pour calculer la moyenne 
    console.log("La moyenne calculée avec Lodash est : " + _.mean(etudiant.notes));  // Calcule et affiche la moyenne des notes avec Lodash


    // 9 - Gestionnaire de package avec npm
    // Installation du package lodash avec la commande : npm install lodash
    // Vous devez d'abord importer lodash

    let array = [note1, note2, note3];
    let shuffled = _.shuffle(array);

    console.log("Avant le mélange : "+ array)
    console.log("Après le mélange : "+ shuffled);

  </script>
</body>
</html>
